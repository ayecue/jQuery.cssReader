var cssReader=function(e){var t={targetUrl:"",plainCss:"",fetchedCss:""};cssReader.extend(this,{d:$.extend(t,e),patternFetch:{},patternRead:{},classIns:{container:{keys:[]},add:function(e,t,n,r,i){if(!(t in this.container)){this.container[t]=[];this.container.keys.push(t)}this.container[t].push({priority:e.getPriority(),name:e,path:n,properties:typeof r=="number"?r:false});i.add(e,t)}},refIns:{container:{keys:[]},add:function(e,t){if(!(e in this.container)){this.container[e]=[];this.container.keys.push(e)}this.container[e].push(t)}},compiledIns:{container:{keys:[]},get:function(e,t,n){if(!(e in t.container))return false;if(!(e in this.container)){var r=t.container[e];this.container[e]={keys:[]};this.container.keys.push(e);for(g=0,gl=r.length;g<gl;g++){var i=n.container[r[g].properties].keys,s=i.length;while(--s>=0){var o=n.container[r[g].properties][i[s]],u=o.isImportant();if(!(i[s]in this.container[e])){this.container[e].keys.push(i[s]);this.container[e][i[s]]={priority:r[g].priority,value:o,path:r[g].path,name:r[g].name,important:u}}else if(this.container[e][i[s]].important<u||this.container[e][i[s]].priority<=r[g].priority&&this.container[e][i[s]].important==u){this.container[e][i[s]].priority=r[g].priority;this.container[e][i[s]].value=o;this.container[e][i[s]].path=r[g].path;this.container[e][i[s]].name=r[g].name;this.container[e][i[s]].important=u}}}return this.container[e]}else return this.container[e]}},attrIns:{container:[],add:function(e,t,n){if(!(e in this.container))this.container[e]={keys:[]};if(typeof this.container[e][t]=="function")t="db_"+t;if(!(t in this.container[e])){this.container[e][t]=[];this.container[e].keys.push(t)}this.container[e][t].push(n)}},setUrl:function(e){this.d.targetUrl=e},setCss:function(e){this.d.plainCss=e.compressCss()},fetchCss:function(){this.d.fetchedCss=this.d.plainCss.match(cssReader.patternFetch)},fetchCssFilter:function(e){var t=typeof e!="string"?t=e.join("|"):e;if(!(t in this.patternFetch))this.patternFetch[t]=new RegExp('([#.\\w\\s:,>\\-_*"=\\[\\]]+){(?:[^}]*(?:'+t+")+[^}]*)}","gi");this.d.fetchedCss=this.d.plainCss.match(this.patternFetch[t])},get:function(e){var t=this;if(this.d.targetUrl){return $.ajax({url:this.d.targetUrl,success:function(n){t.setCss(n);e?t.fetchCssFilter(e):t.fetchCss()}})}},read:function(e){var t=e?e:this.d.fetchedCss;for(var n=0,r=t.length;n<r;n++){if(matches=cssReader.patternRead.exec(t[n])){var i=matches[1],s=matches[2];if(s&&s.length>0){var o=s.split(";"),u=this.attrIns.container.length,a=o.length;while(--a>=0){var f=o[a];if(cssReader.patternProperty.test(f)){var l=f.split(":"),c=l[0].trimBoth(),h=l[1].trimBoth();if(c.length>0&&h.length>0)this.attrIns.add(u,c,h)}}var p=i.indexOf(",")!=-1?i.split(","):[i],d=p.length;while(--d>=0){var v=p[d];if(v.length>0){var m=v.trimBoth(),g=$(m),y=g?g.getPath():false;if(y===false)this.classIns.add(m,m.getStringHash(),false,u,this.refIns);else{if(g.length>1){var b=g.length;while(--b>=0)this.classIns.add(m,y[b].getStringHash(),y[b],u,this.refIns)}else this.classIns.add(m,y.getStringHash(),y,u,this.refIns)}}}}}}return true},readFilter:function(e){var t=typeof e!="string"?t=e.join("|"):e;if(!(t in this.patternRead))this.patternRead[t]=new RegExp("("+t+"):[^;]+;","gi");var n=this.patternRead[t],r=[],i=this.d.fetchedCss.length;while(--i>=0){if(n.test(this.d.fetchedCss[i]))r.push(this.d.fetchedCss[i])}return this.read(r)},search:function(e,t){var n=this.refIns.container.keys.length;while(--n>=0){var r=this.refIns.container[this.refIns.container.keys[n]].length;while(--r>=0){var i=this.compiledIns.get(this.refIns.container[this.refIns.container.keys[n]][r],this.classIns,this.attrIns);if(t?t in i:true)e.call(this,i);else if(cssReader.attrInstance.debugPrefixString+t in i)e.call(this,i)}}},scrape:function(e){var t=this;$.when(t.get()).done(function(){$.when(t.read()).done(function(){if(e)e.call(t,t.d)})})},scrapeFilter:function(e,t,n,r){var i=this;$.when(n?i.get(t):i.get()).done(function(){$.when(r?i.readFilter(t):i.read()).done(function(){if(e)e.call(i,i.d)})})}})};cssReader.extend=function(e,t){for(func in t)e[func]=t[func]};cssReader.extend(cssReader,{patternFetch:/([^}{]+{[^}{]*})/g,patternProperty:/\w+/,patternRead:/([^}{]+){((?:[^:]+:[^;]+;[\s]*)+?)}/,debugPrefixFilter:function(e){return e.replace(/^db_/,"")},DOMIndex:0,getIndex:function(e){if(!("DOMIndex"in e))return e.DOMIndex=this.DOMIndex++;return e.DOMIndex},nodeIndexOf:function(t){if("childNodesIndex"in t)return t.childNodesIndex;if(e=t.previousSibling){var n=0;while(e){if("childNodesIndex"in e)return t.childNodesIndex=e.childNodesIndex+1;n++;e=e.previousSibling}return t.childNodesIndex=n}return-1},getSelectors:function(e){if("selectors"in e)return e.selectors;if(x=e.tagName)return e.selectors=x.toLowerCase()+((i=e.id).length>0?"#"+i:"")+((c=e.className).length>0?"."+c.replace(/\s+/g,"."):"");return false},getPathEx:function(e){if(!("pathStack"in e)){var t=e,n=[];while(this.getSelectors(t)){this.nodeIndexOf(t);n.push(t);t=t.parentNode;if("pathStack"in t)return e.pathStack=n.concat(t.pathStack)}return e.pathStack=n}return e.pathStack}});cssReader.extend(String.prototype,{getPriority:function(){var e=(matches=this.match(/#[^\s\.#]+/g))?matches.length*100:0;e+=(matches=this.match(/\.[^\s\.#]+/g))?matches.length*10:0;e+=(matches=this.replace(/[#\.][^\s\.#]+/g,"").match(/[^\s]+(?=#|\.)?/g))?matches.length*1:0;return e},isImportant:function(){return/!important$/gi.test(this)},trimBoth:function(){return this.replace(/^\s+|\s+$/g,"")},compressCss:function(){return this.replace(/\/\*[\s\S]+?\*\//g,"").replace(/[^\S][\s\n\r]*[^\S]/g,"")},getStringHash:function(){if((i=this.length)==0)return false;var e=0;while(--i>=0){e=(e<<5)-e+this.charCodeAt(i);e=e&e}return"d:"+e.toString()}});cssReader.extend(Array.prototype,{isImportant:function(){var e=this.length;while(--e>=0)if(this[e].isImportant())return true;return false},getStringHash:function(){if(this.length==0)return false;return"e:"+cssReader.getIndex(this[0])}});jQuery.fn.getPath=function(){if((vl=this.length)>1){var e=[];for(var t=0;t<vl;t++)e.push(cssReader.getPathEx(this[t]));return e}return this.length>0?cssReader.getPathEx(this[0]):false}
